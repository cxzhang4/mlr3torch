% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/materialize.R
\name{materialize_internal}
\alias{materialize_internal}
\title{Materialize a Lazy Tensor}
\usage{
materialize_internal(
  x,
  device = "cpu",
  cache = NULL,
  set_keep_results = is.null(cache)
)
}
\arguments{
\item{x}{(\code{\link[=lazy_tensor]{lazy_tensor()}})\cr
The lazy tensor to materialize.}

\item{device}{(\code{character(1L)})\cr
The device to put the materialized tensor on (after running the preprocessing graph).}

\item{cache}{(\code{NULL} or \code{environment()})\cr
Whether to cache the (intermediate) results of the materialization.
This can make data loading faster when multiple \code{lazy_tensor}s reference the same dataset or graph.}

\item{set_keep_results}{(\code{logical(1)})\cr
In some cases, the \code{.pointer} of a \code{\link{DataDescriptor}} might point to a non-terminal node in which case the
this result is not part of the output of the \code{\link{Graph}}.
Therefore we have to include this as part of the \code{keep_results} field of the \code{\link{Graph}}.
When caching is done, this should be set to \code{FALSE} as otherwise data will be discarded that might be relevant
for materializing other lazy tensor columns.}
}
\value{
\code{\link[=lazy_tensor]{lazy_tensor()}}
}
\description{
Materializing a lazy tensor consists of:
\enumerate{
\item Loading the data from the internal dataset of the \code{\link{DataDescriptor}}.
\item Processing these batches in the preprocessing \code{\link{Graph}}s.
\item Returning the result of the \code{\link{PipeOp}} pointed to by the \code{\link{DataDescriptor}} (\code{.pointer}).
}

With multiple \code{\link{lazy_tensor}} columns we can benefit from caching because:
a) Output(s) from the dataset might be input to multiple graphs.
b) Different lazy tensors might be outputs from the same graph.

For this reason it is possible to provide a cache environment.
The hash key for a) is the hash of the indices and the dataset.
The hash key for b) is the hash of the indices dataset and preprocessing graph.
}
\keyword{internal}
